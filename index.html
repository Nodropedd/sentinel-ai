<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentinel AI - Advanced Python Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #7c3aed;
            --dark: #0f172a;
            --darker: #020617;
            --light: #f8fafc;
            --gray: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --code-bg: #1e293b;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-container {
            display: flex;
            height: 100vh;
            max-width: 2000px;
            margin: 0 auto;
        }

        /* Sidebar */
        .sidebar {
            width: 300px;
            background: rgba(15, 23, 42, 0.95);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
        }

        .logo {
            padding: 1.5rem;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo h1 {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .nav-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab-btn {
            flex: 1;
            padding: 1rem;
            background: transparent;
            border: none;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .tab-btn.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            background: rgba(37, 99, 235, 0.1);
        }

        .tab-btn:hover:not(.active) {
            color: var(--light);
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
        }

        .projects-list, .installations-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .project-item, .installation-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .project-item:hover, .installation-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .project-item h4, .installation-item h4 {
            color: var(--light);
            margin-bottom: 0.25rem;
        }

        .project-item p, .installation-item p {
            color: var(--gray);
            font-size: 0.875rem;
        }

        .new-project-btn, .new-installation-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 0.875rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 1rem;
            transition: all 0.3s;
            width: 100%;
        }

        .new-project-btn:hover, .new-installation-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(2, 6, 23, 0.5);
        }

        .chat-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
        }

        .chat-header h2 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
        }

        .chat-header .status {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--success);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-left: 1rem;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .message {
            display: flex;
            gap: 1rem;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .user-avatar {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
        }

        .ai-avatar {
            background: linear-gradient(45deg, #8b5cf6, #ec4899);
        }

        .message-content {
            flex: 1;
            max-width: calc(100% - 60px);
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .message-header .name {
            font-weight: 600;
        }

        .message-header .time {
            color: var(--gray);
            font-size: 0.75rem;
        }

        .message-text {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1rem;
            line-height: 1.6;
        }

        .ai-message .message-text {
            background: rgba(37, 99, 235, 0.1);
            border: 1px solid rgba(37, 99, 235, 0.2);
        }

        .code-block {
            background: var(--code-bg);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-x: auto;
            position: relative;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            color: var(--gray);
            font-size: 0.875rem;
        }

        .copy-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--light);
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            background: var(--primary);
        }

        pre {
            margin: 0;
            white-space: pre-wrap;
        }

        code {
            color: #e2e8f0;
            font-size: 0.9rem;
        }

        .command {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-family: monospace;
            margin: 0.5rem 0;
            display: inline-block;
        }

        .chat-input-container {
            padding: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(15, 23, 42, 0.8);
        }

        .chat-input-wrapper {
            display: flex;
            gap: 0.75rem;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem;
            color: var(--light);
            font-size: 1rem;
            resize: none;
            min-height: 60px;
            max-height: 200px;
            font-family: inherit;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btn:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }

        .thinking-btn {
            background: linear-gradient(45deg, var(--warning), #f97316);
        }

        .thinking-btn:hover {
            background: linear-gradient(45deg, #f59e0b, #ea580c);
        }

        .send-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
        }

        .send-btn:hover {
            background: linear-gradient(45deg, var(--primary-dark), #6d28d9);
        }

        /* Thinking Animation */
        .thinking-indicator {
            display: none;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: rgba(245, 158, 11, 0.1);
            border-radius: 8px;
            margin: 1rem 0;
        }

        .thinking-dots {
            display: flex;
            gap: 0.25rem;
        }

        .thinking-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--warning);
            animation: pulse 1.5s infinite ease-in-out;
        }

        .thinking-dots span:nth-child(2) { animation-delay: 0.2s; }
        .thinking-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1); }
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--dark);
            border-radius: 16px;
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h3 {
            font-size: 1.5rem;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover {
            color: var(--light);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--light);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--light);
            font-size: 1rem;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: 300px;
            }
            
            .chat-input-wrapper {
                flex-wrap: wrap;
            }
            
            .action-buttons {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h1><i class="fas fa-robot"></i> Sentinel AI</h1>
            </div>
            
            <div class="nav-tabs">
                <button class="tab-btn active" data-tab="projects">
                    <i class="fas fa-code"></i> Projects
                </button>
                <button class="tab-btn" data-tab="installations">
                    <i class="fas fa-terminal"></i> Installations
                </button>
            </div>
            
            <div class="tab-content">
                <div class="tab-pane active" id="projects-tab">
                    <div class="projects-list">
                        <div class="project-item">
                            <h4>Web Scraper</h4>
                            <p>BeautifulSoup + Requests</p>
                        </div>
                        <div class="project-item">
                            <h4>Data Analyzer</h4>
                            <p>Pandas + Matplotlib</p>
                        </div>
                        <div class="project-item">
                            <h4>Automation Bot</h4>
                            <p>PyAutoGUI + Selenium</p>
                        </div>
                    </div>
                    <button class="new-project-btn">
                        <i class="fas fa-plus"></i> New Project
                    </button>
                </div>
                
                <div class="tab-pane" id="installations-tab" style="display: none;">
                    <div class="installations-list">
                        <div class="installation-item">
                            <h4>pip install pandas</h4>
                            <p>Data manipulation library</p>
                        </div>
                        <div class="installation-item">
                            <h4>pip install numpy</h4>
                            <p>Numerical computing</p>
                        </div>
                        <div class="installation-item">
                            <h4>pip install flask</h4>
                            <p>Web framework</p>
                        </div>
                    </div>
                    <button class="new-installation-btn">
                        <i class="fas fa-plus"></i> Add Installation
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Main Chat Area -->
        <div class="main-content">
            <div class="chat-header">
                <h2>
                    <i class="fas fa-comment-alt"></i> Sentinel AI Assistant
                    <span class="status">
                        <i class="fas fa-circle"></i> Online
                    </span>
                </h2>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <!-- Messages will be dynamically added here -->
                <div class="message ai-message">
                    <div class="message-avatar ai-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="name">Sentinel AI</span>
                            <span class="time">Just now</span>
                        </div>
                        <div class="message-text">
                            <p>Hello! I'm Sentinel AI, your advanced Python assistant. I specialize in:</p>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>Python programming and debugging</li>
                                <li>Creating complete projects from scratch</li>
                                <li>Providing installation commands</li>
                                <li>Optimizing code performance</li>
                                <li>Advanced web scraping and automation</li>
                                <li>Data analysis and visualization</li>
                            </ul>
                            <p>Try asking me to create a project or help with your Python code!</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="thinking-indicator" id="thinkingIndicator">
                <div class="thinking-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span>Sentinel AI is researching and thinking deeply...</span>
            </div>
            
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea 
                        class="chat-input" 
                        id="messageInput" 
                        placeholder="Ask Sentinel AI about Python projects, code, installations, or any technical question... (Press Shift+Enter for new line)"
                        rows="1"
                    ></textarea>
                    <div class="action-buttons">
                        <button class="action-btn thinking-btn" id="thinkingBtn" title="Deep Research Mode">
                            <i class="fas fa-brain"></i>
                        </button>
                        <button class="action-btn send-btn" id="sendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="projectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Project</h3>
                <button class="close-btn" id="closeProjectModal">&times;</button>
            </div>
            <form id="projectForm">
                <div class="form-group">
                    <label for="projectName">Project Name</label>
                    <input type="text" id="projectName" class="form-control" placeholder="e.g., Web Scraper" required>
                </div>
                <div class="form-group">
                    <label for="projectType">Project Type</label>
                    <select id="projectType" class="form-control" required>
                        <option value="">Select a type</option>
                        <option value="web">Web Application</option>
                        <option value="data">Data Analysis</option>
                        <option value="automation">Automation</option>
                        <option value="machine-learning">Machine Learning</option>
                        <option value="api">API Development</option>
                        <option value="desktop">Desktop Application</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="projectDescription">Description</label>
                    <textarea id="projectDescription" class="form-control" rows="3" placeholder="Describe what you want to build..."></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelProject">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Project</button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="modal" id="installationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Installation Command</h3>
                <button class="close-btn" id="closeInstallationModal">&times;</button>
            </div>
            <form id="installationForm">
                <div class="form-group">
                    <label for="installCommand">Installation Command</label>
                    <input type="text" id="installCommand" class="form-control" placeholder="e.g., pip install pandas numpy matplotlib" required>
                </div>
                <div class="form-group">
                    <label for="installDescription">Description</label>
                    <textarea id="installDescription" class="form-control" rows="3" placeholder="What does this package do?"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelInstallation">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Installation</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // API Configuration
        const API_KEY = 'sk-571611876ef447c7974f47f8d9f0854f';
        const API_URL = 'https://api.openai.com/v1/chat/completions';
        
        // DOM Elements
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const thinkingBtn = document.getElementById('thinkingBtn');
        const thinkingIndicator = document.getElementById('thinkingIndicator');
        const projectModal = document.getElementById('projectModal');
        const installationModal = document.getElementById('installationModal');
        
        // State
        let isThinkingMode = false;
        let conversationHistory = [
            {
                role: "system",
                content: `You are Sentinel AI, an advanced Python expert assistant. You specialize in:
1. Python programming, debugging, and optimization
2. Creating complete projects from scratch with detailed instructions
3. Providing exact pip installation commands
4. Web scraping, automation, data analysis, and machine learning
5. Advanced Python concepts and best practices

Always provide:
- Complete, runnable code examples
- Required pip install commands
- Step-by-step implementation guides
- Error handling and optimization tips
- Project structure recommendations

For complex questions, think step by step and provide comprehensive solutions.`
            }
        ];
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            loadSampleData();
            autoResizeTextarea();
        });
        
        function setupEventListeners() {
            // Send message
            sendBtn.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Thinking mode
            thinkingBtn.addEventListener('click', toggleThinkingMode);
            
            // Tab switching
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    switchTab(tab);
                });
            });
            
            // Project modal
            document.querySelector('.new-project-btn').addEventListener('click', () => {
                projectModal.style.display = 'flex';
            });
            
            document.querySelector('.new-installation-btn').addEventListener('click', () => {
                installationModal.style.display = 'flex';
            });
            
            // Close modals
            document.getElementById('closeProjectModal').addEventListener('click', () => {
                projectModal.style.display = 'none';
            });
            
            document.getElementById('closeInstallationModal').addEventListener('click', () => {
                installationModal.style.display = 'none';
            });
            
            document.getElementById('cancelProject').addEventListener('click', () => {
                projectModal.style.display = 'none';
            });
            
            document.getElementById('cancelInstallation').addEventListener('click', () => {
                installationModal.style.display = 'none';
            });
            
            // Form submissions
            document.getElementById('projectForm').addEventListener('submit', createProject);
            document.getElementById('installationForm').addEventListener('submit', addInstallation);
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === projectModal) projectModal.style.display = 'none';
                if (e.target === installationModal) installationModal.style.display = 'none';
            });
        }
        
        function switchTab(tabName) {
            // Update active tab button
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.tab === tabName) {
                    btn.classList.add('active');
                }
            });
            
            // Show active tab content
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.style.display = 'none';
            });
            
            document.getElementById(`${tabName}-tab`).style.display = 'block';
        }
        
        function autoResizeTextarea() {
            messageInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
        }
        
        function toggleThinkingMode() {
            isThinkingMode = !isThinkingMode;
            thinkingBtn.style.background = isThinkingMode 
                ? 'linear-gradient(45deg, #10b981, #059669)'
                : 'linear-gradient(45deg, var(--warning), #f97316)';
            thinkingBtn.innerHTML = isThinkingMode 
                ? '<i class="fas fa-lightbulb"></i>'
                : '<i class="fas fa-brain"></i>';
            
            addMessage('system', `Thinking mode ${isThinkingMode ? 'activated' : 'deactivated'}.`);
        }
        
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;
            
            // Add user message to chat
            addMessage('user', message);
            messageInput.value = '';
            messageInput.style.height = 'auto';
            
            // Show thinking indicator
            if (isThinkingMode) {
                thinkingIndicator.style.display = 'flex';
            }
            
            // Add to conversation history
            conversationHistory.push({
                role: "user",
                content: isThinkingMode 
                    ? `[DEEP RESEARCH MODE ACTIVATED - Research thoroughly and provide comprehensive solution] ${message}`
                    : message
            });
            
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: "gpt-4",
                        messages: conversationHistory,
                        temperature: 0.7,
                        max_tokens: 2000
                    })
                });
                
                const data = await response.json();
                
                // Hide thinking indicator
                thinkingIndicator.style.display = 'none';
                
                if (data.choices && data.choices[0]) {
                    const aiResponse = data.choices[0].message.content;
                    
                    // Add AI response to chat
                    addMessage('ai', aiResponse);
                    
                    // Add to conversation history
                    conversationHistory.push({
                        role: "assistant",
                        content: aiResponse
                    });
                    
                    // Auto-scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Extract and display any installation commands
                    extractInstallationCommands(aiResponse);
                }
            } catch (error) {
                console.error('Error:', error);
                thinkingIndicator.style.display = 'none';
                addMessage('ai', 'Sorry, I encountered an error. Please try again.');
            }
        }
        
        function addMessage(sender, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                <div class="message-avatar ${sender}-avatar">
                    <i class="fas ${sender === 'user' ? 'fa-user' : 'fa-robot'}"></i>
                </div>
                <div class="message-content">
                    <div class="message-header">
                        <span class="name">${sender === 'user' ? 'You' : 'Sentinel AI'}</span>
                        <span class="time">${time}</span>
                    </div>
                    <div class="message-text">
                        ${formatMessage(content)}
                    </div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function formatMessage(content) {
            // Format code blocks
            let formatted = content.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
                lang = lang || 'python';
                return `
                    <div class="code-block">
                        <div class="code-header">
                            <span>${lang}</span>
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                        </div>
                        <pre><code>${escapeHtml(code.trim())}</code></pre>
                    </div>
                `;
            });
            
            // Format inline code
            formatted = formatted.replace(/`([^`]+)`/g, '<code>$1</code>');
            
            // Format installation commands
            formatted = formatted.replace(/(pip install|pip3 install|conda install) ([^\n<]+)/gi, (match) => {
                return `<div class="command">${match}</div>`;
            });
            
            // Format lists
            formatted = formatted.replace(/^\s*[-*]\s+(.+)$/gm, '<li>$1</li>');
            formatted = formatted.replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>');
            
            // Format line breaks
            formatted = formatted.replace(/\n/g, '<br>');
            
            return formatted;
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function copyToClipboard(button) {
            const codeBlock = button.closest('.code-block');
            const code = codeBlock.querySelector('code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = 'var(--success)';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                }, 2000);
            });
        }
        
        function extractInstallationCommands(content) {
            const installRegex = /(pip install|pip3 install|conda install) ([^\n]+)/gi;
            const matches = [...content.matchAll(installRegex)];
            
            matches.forEach(match => {
                const [fullMatch, , packages] = match;
                if (packages) {
                    // Add to installations list if not already present
                    const installList = document.querySelector('.installations-list');
                    const existing = [...installList.querySelectorAll('.installation-item h4')]
                        .some(h4 => h4.textContent.includes(packages.split(' ')[0]));
                    
                    if (!existing) {
                        const installItem = document.createElement('div');
                        installItem.className = 'installation-item';
                        installItem.innerHTML = `
                            <h4>${fullMatch}</h4>
                            <p>${getPackageDescription(packages)}</p>
                        `;
                        installList.appendChild(installItem);
                    }
                }
            });
        }
        
        function getPackageDescription(packages) {
            const commonPackages = {
                'pandas': 'Data analysis and manipulation library',
                'numpy': 'Numerical computing library',
                'matplotlib': 'Plotting and visualization library',
                'seaborn': 'Statistical data visualization',
                'scikit-learn': 'Machine learning library',
                'tensorflow': 'Deep learning framework',
                'pytorch': 'Machine learning framework',
                'flask': 'Web framework',
                'django': 'Full-featured web framework',
                'requests': 'HTTP library',
                'beautifulsoup4': 'Web scraping library',
                'selenium': 'Browser automation',
                'pyautogui': 'GUI automation',
                'fastapi': 'Modern web framework',
                'sqlalchemy': 'Database toolkit',
                'opencv-python': 'Computer vision library',
                'pillow': 'Image processing library',
                'jupyter': 'Interactive computing',
                'streamlit': 'Data app framework'
            };
            
            const firstPackage = packages.split(' ')[0].toLowerCase();
            return commonPackages[firstPackage] || 'Python package';
        }
        
        function createProject(e) {
            e.preventDefault();
            const name = document.getElementById('projectName').value;
            const type = document.getElementById('projectType').value;
            const description = document.getElementById('projectDescription').value;
            
            const projectList = document.querySelector('.projects-list');
            const projectItem = document.createElement('div');
            projectItem.className = 'project-item';
            projectItem.innerHTML = `
                <h4>${name}</h4>
                <p>${type} project - ${description}</p>
            `;
            
            projectList.appendChild(projectItem);
            projectModal.style.display = 'none';
            e.target.reset();
            
            // Ask AI to generate project structure
            const prompt = `Create a complete Python project structure for a ${type} project named "${name}". Description: ${description}. Include:
1. Required pip installations
2. Project structure with files and folders
3. Main code implementation
4. Requirements.txt
5. README.md content`;
            
            messageInput.value = prompt;
            sendMessage();
        }
        
        function addInstallation(e) {
            e.preventDefault();
            const command = document.getElementById('installCommand').value;
            const description = document.getElementById('installDescription').value;
            
            const installList = document.querySelector('.installations-list');
            const installItem = document.createElement('div');
            installItem.className = 'installation-item';
            installItem.innerHTML = `
                <h4>${command}</h4>
                <p>${description}</p>
            `;
            
            installList.appendChild(installItem);
            installationModal.style.display = 'none';
            e.target.reset();
        }
        
        function loadSampleData() {
            // Add some sample messages
            setTimeout(() => {
                addMessage('ai', `I can help you with advanced Python projects. For example:

**To create a web scraper:**
\`\`\`bash
pip install requests beautifulsoup4 pandas
\`\`\`

**Sample web scraper code:**
\`\`\`python
import requests
from bs4 import BeautifulSoup
import pandas as pd

def scrape_website(url):
    response = requests.get(url)
    soup = BeautifulSoup(response.content, 'html.parser')
    
    # Extract data here
    data = []
    for item in soup.find_all('div', class_='item'):
        title = item.find('h2').text
        data.append({'title': title})
    
    return pd.DataFrame(data)

# Usage
df = scrape_website('https://example.com')
print(df.head())
\`\`\``);
            }, 1000);
        }
        
        // Expose copy function globally
        window.copyToClipboard = copyToClipboard;
    </script>
</body>
</html>
